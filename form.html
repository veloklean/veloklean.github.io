<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Veloklean | Confirm Booking</title>
<style>
/* Add the necessary hidden class */
.hidden {
    display: none !important;
}
/* Update body to stack items vertically while centering */
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #d0f0ff, #fff8f0);
    margin: 0;
    /* Use flex to center the content */
    display: flex; 
    align-items: center; /* Center horizontally */
    justify-content: center; /* Center vertically */
    min-height: 100vh;
}
/* Container styling to set the maximum width for the centered content */
.container {
    width: 90%;
    max-width: 420px;
    /* Ensure the container is what is centered, not its contents, and stack them */
    display: flex;
    flex-direction: column;
    align-items: center; 
}
/* Form styling remains similar, but it now uses the container's width */
#quote-form, #submission-loader, #success-message {
    width: 100%; /* Take full width of the container */
}
#quote-form {
    background: #fff;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}
h2 {
    text-align: center;
    color: #222;
    margin-bottom: 1rem;
}
input, textarea, button {
    width: 100%;
    padding: 0.8rem;
    margin: 0.5rem 0;
    border: 1px solid #ccc;
    border-radius: 10px;
    font-size: 1rem;
}
button {
    background: #00bfa6;
    color: #fff;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
}
button:hover {
    background: #009e8a;
}
#msg {
    text-align: center;
    margin-top: 1rem;
    font-weight: 600;
}
</style>
</head>
<body>

<div class="container">

    <form id="quote-form" name="submit-to-google-sheet">
      <h2>Confirm Booking</h2>
      <input name="client_name" placeholder="Client Name" required />
      <input name="phone" placeholder="Client Phone" required />
      <input name="city" placeholder="City" required />
      <select name="service" id="service" required
    class="p-3 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 w-full">
  <option value="" disabled selected>Select Service</option>
  <option value="Residential Cleaning">Residential Cleaning</option>
  <option value="Deep Cleaning">Deep Cleaning</option>
  <option value="Move-In / Move-Out Cleaning">Move-In / Move-Out Cleaning</option>
  <option value="Office Cleaning">Office Cleaning</option>
  <option value="Commercial Cleaning">Commercial Cleaning</option>
  <option value="Airbnb / Short-Term Rental Cleaning">Airbnb / Short-Term Rental Cleaning</option>
  <option value="Post-Construction Cleaning">Post-Construction Cleaning</option>
  <option value="Carpet & Upholstery Cleaning">Carpet & Upholstery Cleaning</option>
  <option value="Window Cleaning">Window Cleaning</option>
  <option value="Disinfection & Sanitization">Disinfection & Sanitization</option>
</select>

      <input type="date" name="date" required />
      <input name="address" placeholder="Client Address" required />
      <input name="rep_name" placeholder="Rep Name" required />
      <select name="TimeSlot" id="TimeSlot" class="p-3 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 w-full">
          <option value="" disabled selected>Select Time Slot</option>
          <option value="8:00-9:00 AM">8:00–9:00 AM</option>
          <option value="9:00-10:00 AM">9:00–10:00 AM</option>
          <option value="10:00-11:00 AM">10:00–11:00 AM</option>
          <option value="11:00-12:00 PM">11:00–12:00 PM</option>
          <option value="12:00-1:00 PM">12:00–1:00 PM</option>
          <option value="1:00-2:00 PM">1:00–2:00 PM</option>
          <option value="2:00-3:00 PM">2:00–3:00 PM</option>
          <option value="3:00-4:00 PM">3:00–4:00 PM</option>
          <option value="4:00-5:00 PM">4:00–5:00 PM</option>
          <option value="5:00-6:00 PM">5:00–6:00 PM</option>
          <option value="6:00-7:00 PM">6:00–7:00 PM</option>
          <option value="7:00-8:00 PM">7:00–8:00 PM</option>
     </select>

       <input type="number" name="price" placeholder="Service Price">
      <button type="submit">Submit Booking</button>
      <p id="msg"></p>
    </form>

    <div id="submission-loader" class="hidden" style="text-align: center; padding: 40px;">
        <h2 style="color:#00bfa6;">Processing Booking...</h2>
        <p>Please wait while we assign a cleaner.</p>
    </div>

    <div id="success-message" class="hidden" style="background:#e6fff7; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center;">
        <h2 style="color:#00bfa6;">✅ Success!</h2>
        <p>Your booking has been assigned to a cleaner and they have been notified.</p>
        <p style="font-size: 0.9em;">(Returning to form shortly...)</p>
    </div>

</div> <script>
// IMPORTANT: Replace this with the actual 'exec' URL of your Apps Script Web App!
const scriptURL = 'https://script.google.com/macros/s/AKfycbwOMEApgnCn7dKbEnfCNa-ul5GCN3PnYRcaXz2wmin_80aFxcxZCceBluTMXs3_y2IV/exec'; 

// NOTE: These now correctly refer to elements in the HTML above
const form = document.forms['submit-to-google-sheet'];
const submissionLoader = document.getElementById('submission-loader'); 
let successMessage1 = document.getElementById('success-message');     
let quoteForm1 = document.getElementById('quote-form'); // Correctly references the form by its new ID

// Your form submission logic
form.addEventListener('submit', e => {
    e.preventDefault();

    // 1. SHOW LOADER and HIDE FORM
    quoteForm1.classList.add('hidden');
    successMessage1.classList.add('hidden'); 
    submissionLoader.classList.remove('hidden');

    // Fetch call using the FormData object
    fetch(scriptURL, { 
    method: 'POST', 
    body: new FormData(form) // This is the standard, modern way for Apps Script to accept POST data
})
    
    .then(response => {
        if (response.ok) {
            // 2. SUCCESS: HIDE LOADER, SHOW SUCCESS MESSAGE
            
            setTimeout(() => {
                submissionLoader.classList.add('hidden');
                successMessage1.classList.remove('hidden');
                form.reset(); // Reset form fields
                
                successMessage1.scrollIntoView({ behavior: 'smooth', block: 'center' }); 

                // Hide success message and show form again after 5 seconds
                setTimeout(() => {
                    successMessage1.classList.add('hidden');
                    quoteForm1.classList.remove('hidden');
                }, 5000); 
                
            }, 1000); 
        } else {
            throw new Error(`Server returned status: ${response.status}`);
        }
    })
    .catch(error => {
        console.error('Error!', error.message);
        
        // 3. ERROR: HIDE LOADER, SHOW FORM, ALERT USER
        submissionLoader.classList.add('hidden');
        quoteForm1.classList.remove('hidden');

        alert('There was an error submitting your quote. Please try again or contact us directly.');
    });
});
</script>
</body>
</html>
</html>
